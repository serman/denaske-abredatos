/* $Id: environment_indicator.min.js,v 1.1.2.1 2009/12/12 13:59:35 mrfelton Exp $ */

/**
 * @file
 * Environment info JavaScript.
 *
 * @author Tom Kirkpatrick (mrfelton), www.kirkdesigns.co.uk
 */
Drupal.environmentIndicator=Drupal.environmentIndicator||{};Drupal.behaviors.environmentIndicator=function(context){Drupal.settings.environment_indicator=$.extend({text:' ',color:'#d00c0c',suppress:false,margin:false,position:'left'},Drupal.settings.environment_indicator||{});if(Drupal.settings.environment_indicator.suppress){return;};if($('body:not(.environment-indicator-processed)',context).length){Drupal.settings.environment_indicator.cssClass='environment-indicator-'+Drupal.settings.environment_indicator.position;var $environmentIndicator=$('#environment-indicator',context);if(!$environmentIndicator.length){$('body',context).prepend('<div id="environment-indicator">'+Drupal.settings.environment_indicator.text+'</div>');$('body',context).addClass(Drupal.settings.environment_indicator.cssClass);var $environmentIndicator=$('#environment-indicator',context);$environmentIndicator.css('background-color',Drupal.settings.environment_indicator.color);$environmentIndicator.html($environmentIndicator.text().replace(/(.)/g,"$1<br />"));if(Drupal.settings.environment_indicator.margin){$('body:not(.environment-indicator-adjust)',context).addClass('environment-indicator-adjust');if($("#admin-menu").length){$("#admin-menu").css('margin-'+Drupal.settings.environment_indicator.position,'30px');$("#admin-menu").css('width',$("#admin-menu").width()-30+'px');$(window).resize(Drupal.environmentIndicator.stretchAdminMenu);}}}
$('body:not(.environment-indicator-processed)',context).addClass('environment-indicator-processed');}};Drupal.environmentIndicator.stretchAdminMenu=function(){if(Drupal.settings.environment_indicator.margin){$("#admin-menu").css('width',$("body").width()+'px');};};$.fn.backgroundPosition=function(){var p=$(this).css('background-position');if(typeof(p)==='undefined'){p=$(this).css('background-position-x')+' '+$(this).css('background-position-y');}
var posX=p.split(' ')[0].replace(/px/,'');var posY=p.split(' ')[1].replace(/px/,'');return[posX,posY];};
